diff -Naur Installer-org/016/Functions/Filesystem Installer/016/Functions/Filesystem
--- Installer-org/016/Functions/Filesystem	2024-01-04 12:00:00.000000000 +0000
+++ Installer/016/Functions/Filesystem	2024-01-04 12:00:00.000000000 +0000
@@ -10,6 +10,10 @@
 # Filesystem-related functions
 #
 
+# FreeBSD UFS support
+UFS_SUPPORTED=1
+export UFS_SUPPORTED
+
 # Check if a filesystem is supported
 is_filesystem_supported() {
     local fs_type="$1"
@@ -15,7 +19,7 @@
 is_filesystem_supported() {
     local fs_type="$1"
     case "$fs_type" in
-        ext2|ext3|ext4|xfs|btrfs|reiserfs|jfs|nilfs2)
+        ext2|ext3|ext4|xfs|btrfs|reiserfs|jfs|nilfs2|ufs)
             return 0
             ;;
         *)
@@ -30,6 +34,15 @@
             ;;
     esac
 }
+
+# UFS-specific functions for FreeBSD
+create_ufs_filesystem() {
+    local device="$1"
+    echo "Creating UFS filesystem on $device..."
+    newfs "$device" || return 1
+    return 0
+}
+
 # Mount a filesystem
 mount_filesystem() {
     local device="$1"
@@ -40,6 +53,14 @@
     local mountpoint="$2"
     local fstype="$3"
 
+    # FreeBSD-specific handling
+    if [ "$(uname -s)" = "FreeBSD" ]; then
+        if [ "$fstype" = "ufs" ]; then
+            mount -t ufs "$device" "$mountpoint"
+            return $?
+        fi
+    fi
+
     case "$fstype" in
         ufs)
             # Use UFS-specific mount command on FreeBSD
@@ -60,6 +81,14 @@
             ;;
     esac
 }
+
+# UFS filesystem creation
+create_filesystem_ufs() {
+    local device="$1"
+    create_ufs_filesystem "$device"
+}
+
 # Format a device with a specific filesystem
 format_device() {
     local device="$1"
@@ -70,7 +99,7 @@
 format_device() {
     local device="$1"
     local fstype="$2"
-    case "$fstype" in
+    case "$fstype" in
         ext2|ext3|ext4)
             mkfs.ext4 "$device" || return 1
             ;;
@@ -85,6 +114,9 @@
             ;;
         ufs)
             create_ufs_filesystem "$device" || return 1
+            # On FreeBSD, UFS is the native filesystem
+            if [ "$(uname -s)" = "FreeBSD" ]; then
+                return 0
+            fi
             ;;
     esac
 }